@model UserManagement.ViewModel.UserUpdateViewModel
@{
    var imagePath = "~/images/" + Model.ExistingPhotoPath;
    ViewData["Title"] = "Update Page";
}

<div class="container">
    <h1>Update User</h1>
    <form asp-action="update" asp-controller="user" method="post" class="mt-3" enctype="multipart/form-data">
        <input type="hidden" asp-for="ID"> 
        <input type="hidden" asp-for="ExistingPhotoPath">
        <div class="form-group row">
            <label asp-for="Name" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="Name" class="form-control">
                <span asp-validation-for="Name"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="Email" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <input asp-for="Email" class="form-control">
                <span asp-validation-for="Email"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="Department" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <select asp-for="Department" class="form-control" asp-items="@Html.GetEnumSelectList<Dep>()"></select>
                <span asp-validation-for="Department"></span>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="Photo" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <div class="custom-file">
                    <input asp-for="Photo" class="form-control custom-file-input">
                    <label class="custom-file-label">Click here to change the picture...</label>
                </div>
            </div>
        </div>

        <div class="text-center">
            <img src="@imagePath" asp-append-version="true" class="w-25">
        </div>
        <button type="submit" class="btn btn-primary">Update</button>
        <a asp-controller="user" asp-action="index" class="btn btn-primary">Back</a>
    </form>
</div>

@section Script{
    <script>
        $(document).ready(function(){
            $('.custom-file-input').on("change", function(){
                var filename = $(this).val().split('\\').pop();
                $(this).next('.custom-file-label').html(filename);
            })
        })
    </script>
}